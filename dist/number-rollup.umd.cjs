(function(l,a){typeof exports=="object"&&typeof module<"u"?module.exports=a():typeof define=="function"&&define.amd?define(a):(l=typeof globalThis<"u"?globalThis:l||self,l["number-rollup"]=a())})(this,function(){"use strict";const l=e=>{let t=[];if(e&&e.id){const n=a(e);n&&t.push(n)}else t=x(e);return t.length===0&&console.warn("number-rollup animation was triggered but no target elements were found"),t},a=e=>{const t=document.getElementById(e.id);if(!A(t)){const n=Number(e.startNumber),r=Number(e.endNumber),u=Number(e.duration),b=(r-n)/u,o=N(n,r);return{domElement:t,startNumber:n,endNumber:r,incrementPerMillisecond:b,formatNumber:e.formatNumber,direction:o}}},x=e=>{const t=document.querySelectorAll(".number-rollup"),n=[];for(let r=0;r<t.length;r++){const u=t[r];if(!A(u)){const c=T(u,e);n.push(c)}}return n},T=(e,t)=>{const n=h(e),u=(n.endNumber-n.startNumber)/n.duration,c=N(n.startNumber,n.endNumber);return{domElement:e,startNumber:n.startNumber,endNumber:n.endNumber,prefix:n.prefix,suffix:n.suffix,incrementPerMillisecond:u,formatNumber:t?t.formatNumber:void 0,direction:c}},h=e=>{const t=Number(e.getAttribute("data-number-rollup-start")),n=Number(e.getAttribute("data-number-rollup-end")),r=Number(e.getAttribute("data-number-rollup-duration")),u=e.getAttribute("data-number-rollup-prefix")?String(e.getAttribute("data-number-rollup-prefix")):"",c=e.getAttribute("data-number-rollup-suffix")?String(e.getAttribute("data-number-rollup-suffix")):"";return{startNumber:t,endNumber:n,duration:r,prefix:u,suffix:c}},N=(e,t)=>e<t?p.Ascending:p.Descending,p=Object.freeze({Ascending:"ascending",Descending:"descending"}),A=e=>e.classList.contains("number-rollup-is-active"),w=(e,t)=>{const n=D(t,e);let r=e.domElement;r.querySelector(".counter-element")&&(r=r.querySelector(".counter-element")),r.innerHTML=`${e.prefix||""}${n}${e.suffix||""}`},D=(e,t)=>{let n=E(e,t.endNumber,t.direction);return t.formatNumber&&(n=t.formatNumber(n)),n},E=(e,t,n)=>{let r;return n==="ascending"?e<t?r=e:r=t:n==="descending"?e>t?r=e:r=t:console.error("getNumber() not set"),r},v={root:null,rootMargin:"0px",threshold:1};function S(e){let t,n=new IntersectionObserver((o,i)=>{o.forEach(s=>{if(s.isIntersecting){let m=s.target,f=t.find(d=>d.domElement===m);r(f),i.unobserve(m)}})},v);t=l(e),t.forEach(o=>{n.observe(o.domElement)});const r=o=>{u(o.domElement,!0);let i=o.startNumber,s=0,m=performance.now();const f=()=>{const d=performance.now()-m;if(d>0){i=c(o.incrementPerMillisecond,d,i);const g=Math.floor(i);g!=s&&(w(o,g),s=g)}b(i,o.direction,o.endNumber)?(m=performance.now(),requestAnimationFrame(f)):u(o.domElement,!1)};f()},u=(o,i)=>{const s="number-rollup-is-active";i?o.classList.add(s):o.classList.remove(s)},c=(o,i,s)=>{const m=o*i;return s+m},b=(o,i,s)=>i==="ascending"?o<s:o>s}return S});
